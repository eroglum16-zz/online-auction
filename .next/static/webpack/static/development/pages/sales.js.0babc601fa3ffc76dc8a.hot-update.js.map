{"version":3,"file":"static/webpack/static/development/pages/sales.js.0babc601fa3ffc76dc8a.hot-update.js","sources":["webpack:///./pages/sales.js"],"sourcesContent":["import Layout from \"../components/AppLayout\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport SaleRow from \"../components/SaleRow\";\nimport {Badge} from \"reactstrap\";\nimport {auth, getUser} from \"../utils/auth\";\nimport axios from \"axios\";\nimport React from \"react\";\n\nconst apiConfig = require('../api-config');\n\nclass Sales extends React.Component{\n    constructor(props) {\n        super(props);\n        let token = this.props.token;\n        this.state = {\n            loggedIn: !!token,\n            user: {},\n            sales: []\n        };\n    }\n    componentDidMount() {\n        getUser(this.props.token).then(user => {\n            this.setState({\n                user: user\n            });\n            this.getExpiredSales(user.email);\n        });\n    }\n    getExpiredSales(userEmail){\n        const url = apiConfig.serverUrl + '/sales/expired/' + userEmail;\n        axios.get(url)\n            .then((response) => {\n                this.setState({\n                    sales: response.data.sales,\n                });\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n    }\n\n    render() {\n        let saleRows;\n        if (this.state.purchases.length === 0){\n            saleRows =\n                <Alert className=\"mt-3\" color=\"info\">\n                    Henüz ürün satın almadınız. Alışverişe\n                    <Link href='/index' >\n                        <a style={{color: 'inherit'}}> hemen başlayın. </a>\n                    </Link>\n                </Alert>\n        }else{\n            saleRows = this.state.sales.map((sale) =>\n                <SaleRow image={apiConfig.serverUrl + '/images/products/' + sale.images[0]}\n                         type=\"s\"\n                         name={sale.title}\n                         id={sale._id}\n                         description={sale.description} />\n            );\n        }\n\n        return (\n            <Layout page=\"me\" user={this.state.user} loggedIn={this.state.loggedIn}>\n                <div className=\"container bg-white\" style={{ padding:'3%', marginTop:'3%', minHeight: '500px'}}>\n                    <h2> Sattığınız Ürünler\n                        <Badge className=\"ml-2\" color=\"dark\" pill>\n                            {this.state.sales.length}\n                        </Badge>\n                    </h2>\n                    <hr/>\n                    {saleRows}\n                </div>\n            </Layout>\n        );\n    }\n}\n\nSales.getInitialProps = async ctx => {\n    // Check user's session\n    const token = auth(ctx);\n\n    return { token }\n};\n\nexport default Sales;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AAQA;AACA;;;AAAA;AAAA;AACA;AAAA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AADA;AAGA;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAOA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AAhEA;AACA;AAkEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAIA;AAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAMA;;;;A","sourceRoot":""}