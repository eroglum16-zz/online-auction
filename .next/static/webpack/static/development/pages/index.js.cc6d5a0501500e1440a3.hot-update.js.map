{"version":3,"file":"static/webpack/static/development/pages/index.js.cc6d5a0501500e1440a3.hot-update.js","sources":["webpack:///./utils/auth.js"],"sourcesContent":["import Router from 'next/router'\nimport nextCookie from 'next-cookies'\nimport cookie from '../node_modules/js-cookie'\n\nexport const login = ({ token }) => {\n    cookie.set('token', token, { expires: 1 })\n    Router.push('/index')\n};\n\nexport const auth = ctx => {\n    const { token } = nextCookie(ctx);\n\n    if (ctx.req && !token) {\n        ctx.res.writeHead(302, { Location: '/login' });\n        ctx.res.end();\n        return\n    }\n\n    if (!token) {\n        Router.push('/login')\n    }\n\n    return token\n};\n\nexport const guest = ctx => {\n    const { token } = nextCookie(ctx);\n\n    if (ctx.req && token) {\n        ctx.res.writeHead(302, { Location: '/index' });\n        ctx.res.end();\n        return\n    }\n\n    if (token) {\n        Router.push('/index')\n    }\n\n    return;\n};\n\nexport const getToken = ctx => {\n    const { token } = nextCookie(ctx);\n\n    return token\n};\n\nexport const getUser = token => {\n\n};\n\nexport const logout = () => {\n    cookie.remove('token')\n    // to support logging out from all windows\n    window.localStorage.setItem('logout', Date.now())\n    Router.push('/login')\n};"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}