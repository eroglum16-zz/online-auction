{"version":3,"file":"static/webpack/static/development/pages/login.js.309064a08acffba850d1.hot-update.js","sources":["webpack:///./pages/login.js"],"sourcesContent":["import Layout from \"../components/AppLayout\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport {Button, Form, FormGroup, Input, Alert} from 'reactstrap';\nimport Link from \"next/link\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport {guest, login} from '../utils/auth'\n\nconst validator = require('../utils/validations');\n\nclass Login extends React.Component{\n    constructor(props) {\n        super(props);\n        const message = this.props.registered ? 'Kaydınız oluşturuldu, lütfen giriş yapın!' : '';\n        const color = this.props.registered ? 'success' : '';\n        this.state = {\n            alert: {\n                message: message,\n                color: color\n            },\n            email: this.props.registered ? this.props.registered : '',\n            password: ''\n        }\n        this.handleInputChange      = this.handleInputChange.bind(this);\n        this.handleLogin            = this.handleLogin.bind(this);\n        this.handlePasswordEnter    = this.handlePasswordEnter.bind(this);\n        this.handleEmailEnter       = this.handleEmailEnter.bind(this);\n    }\n    handleInputChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n\n        this.setState({\n            [name]: value\n        });\n    }\n    handleEmailEnter(event) {\n        if (event.key === 'Enter') {\n            this.refs.password.focus();\n        }\n    }\n    handlePasswordEnter(event) {\n        if (event.key === 'Enter') {\n            this.handleLogin();\n        }\n    }\n    handleLogin(){\n        if(!this.validate()) return;\n        const apiConfig = require('../api-config');\n        const url = apiConfig.serverUrl + '/user/authenticate';\n        axios.post(url, {\n            email: this.state.email,\n            password: this.state.password\n        })\n            .then(function (response) {\n                const token  = response.data.token;\n                login({ token });\n            })\n            .catch(function (error) {\n                if (error.response){\n                    let message = error.response.data.message;\n                    this.setState({\n                        alert: {\n                            message: message,\n                            color: 'danger'\n                        },\n                        password: ''\n                    });\n                }else{\n                    this.setState({\n                        alert: {\n                            message: 'Sunucudaki bir sorundan dolayı kayıt işleminizi şu anda gerçekleştiremiyoruz.',\n                            color: 'info'\n                        }\n                    });\n                }\n            }.bind(this));\n    }\n    validate(){\n        if (!validator.isEmail(this.state.email)){\n            this.setState({\n                alert: {\n                    message: 'Geçerli bir email adresi girmediniz.',\n                    color: 'danger'\n                }\n            });\n            return false;\n        }else if (this.state.password.length === 0){\n            this.setState({\n                alert: {\n                    message: 'Şifrenizi girmediniz.',\n                    color: 'danger'\n                }\n            });\n            return false;\n        }else return true\n    }\n    render() {\n        return (\n            <Layout page=\"login\">\n                <div className=\"container bg-white\" style={{ padding:'3%', marginTop:'3%'}}>\n                    <div className=\"row justify-content-md-center\">\n                        <div className=\"col-md-4\">\n                            { this.state.alert.message.length > 0 ?\n                                <Alert color={this.state.alert.color}>\n                                    {this.state.alert.message}\n                                </Alert>\n                                : ''\n                            }\n                            <h2 className=\"text-light bg-dark text-center rounded p-2\"> Kullanıcı Girişi </h2>\n                            <hr/>\n                            <Form>\n                                <FormGroup>\n                                    <Input bsSize=\"lg\"\n                                           type=\"email\"\n                                           name=\"email\"\n                                           value={this.state.email}\n                                           onChange={this.handleInputChange}\n                                           onKeyDown={this.handleEmailEnter}\n                                           id=\"email\"\n                                           placeholder=\"Kayıtlı email adresiniz\" />\n                                </FormGroup>\n                                <FormGroup>\n                                    <Input bsSize=\"lg\"\n                                           type=\"password\"\n                                           name=\"password\"\n                                           value={this.state.password}\n                                           onChange={this.handleInputChange}\n                                           onKeyDown={this.handlePasswordEnter}\n                                           id=\"password\"\n                                           ref=\"password\"\n                                           placeholder=\"Parolanız\" />\n                                </FormGroup>\n                                <p>\n                                    <Link href={'/forget-password'} >\n                                        <a className=\"text-dark \"> Parolamı unuttum</a>\n                                    </Link>\n                                </p>\n                                <Button color=\"secondary\"\n                                        size=\"lg\"\n                                        onClick={this.handleLogin}\n                                        block>\n                                    Giriş Yapın\n                                </Button>\n                            </Form>\n                            <hr/>\n                            <p>Hesabınız yok mu?\n                                <Link href={'/registration'} >\n                                    <a className=\"text-dark\"> Üye olun</a>\n                                </Link>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </Layout>\n        );\n    }\n}\n\nLogin.getInitialProps = async function(context) {\n    guest(context);\n    const {registered} = context.query;\n    return {registered};\n};\n\nexport default Login;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AANA;AAQA;AACA;AACA;AACA;AAfA;AAgBA;AACA;;;AAAA;AACA;AACA;AACA;AAEA;AAGA;;;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAKA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AALA;AAOA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;;AAnJA;AACA;AAqJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAGA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAKA;;;;A","sourceRoot":""}