{"version":3,"file":"static/webpack/static/development/pages/registration.js.be16191beba69936dfc0.hot-update.js","sources":["webpack:///./pages/registration.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Layout from \"../components/AppLayout\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport { Button, Form, FormGroup, Label, Input, FormText, Alert } from 'reactstrap';\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport Router from 'next/router';\nimport ValidationError from \"../components/ValidationError\";\n\nconst bcrypt    = require('bcryptjs');\nconst salt      = bcrypt.genSaltSync(10);\nconst validator = require('../utils/validations');\n\nclass Registration extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            nameSurname: '',\n            email: '',\n            password: '',\n            passwordConfirm: '',\n            validationErrors: {},\n            alertMessage: ''\n        };\n        this.handleRegistration = this.handleRegistration.bind(this);\n        this.handleInputChange = this.handleInputChange.bind(this);\n    }\n    handleInputChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n\n        let styles  = this.state.styles;\n        if (name === 'email'){\n            if(value.length !== 0 && !validator.isEmail(value)){\n                styles.email = {\n                    border: 'none',\n                    borderBottom: '2px solid #e33',\n                }\n            }else{\n                styles.email = {}\n            }\n        }else if(name === 'passwordConfirm'){\n            if(value.length !== 0 && (value !== this.state.password)){\n                styles.passwordConfirm = {\n                    border: 'none',\n                    borderBottom: '2px solid #c00',\n                }\n            }else{\n                styles.passwordConfirm = {}\n            }\n        }\n\n        let errors = this.state.validationErrors;\n        errors[name] = '';\n\n        this.setState({\n            [name]: value,\n            styles: styles,\n            validationErrors: errors\n        });\n    }\n    handleRegistration(){\n        const apiConfig = require('../api-config');\n        const url = apiConfig.serverUrl + '/user/save';\n        if (this.state.password !== this.state.passwordConfirm){\n            document.getElementById('password-confirm').style.border = '1px solid red';\n            return;\n        }\n        let pass = bcrypt.hashSync(this.state.password, salt);\n\n        let validated = this.validate();\n        if(!validated) return;\n        axios.post(url, {\n            nameSurname: this.state.nameSurname,\n            email: this.state.email,\n            password: pass\n        })\n            .then(function (response) {\n                Router.push('/login?registered=true');\n            })\n            .catch(function (error) {\n                this.setState({\n                    alertMessage: error.response.data.message\n                });\n            }.bind(this));\n    }\n    validate(){\n        let validated   = true;\n        let errors      = this.state.validationErrors;\n\n        if (this.state.nameSurname.length < 5){\n            validated = false;\n            errors.nameSurname = \"Ad soyad alanına daha uzun bir değer girmelisiniz.\"\n        }else if (this.state.nameSurname.length > 50){\n            validated = false;\n            errors.nameSurname = \"Ad soyad en fazla 50 karakterdan oluşabilir.\"\n        }\n\n        if(!validator.isEmail(this.state.email)){\n            validated = false;\n            errors.email = \"Geçerli bir email adresi girmediniz.\"\n        }\n\n        if(this.state.password !== this.state.passwordConfirm){\n            validated = false;\n            errors.passwordConfirm = \"Şifreler eşleşmiyor.\"\n        }\n\n        if (!validated)\n            this.setState({\n                validationErrors: errors,\n                password: '',\n                passwordConfirm: ''\n            });\n\n        return validated;\n    }\n    render() {\n        return (\n            <Layout page=\"registration\">\n                <div className=\"container bg-white\" style={{ padding:'3%', marginTop:'3%'}}>\n                    <div className=\"row justify-content-md-center\">\n                        <div className=\"col-md-4\">\n                            { this.state.alertMessage.length > 0 ?\n                            <Alert color=\"danger\">\n                                {this.state.alertMessage}\n                            </Alert>\n                                : ''\n                            }\n                            <h2 className=\"text-light bg-dark text-center rounded p-2\"> Kayıt Olun </h2>\n                            <hr/>\n                            <Form>\n                                <FormGroup>\n                                    <Input bsSize=\"lg\"\n                                           type=\"text\"\n                                           name=\"nameSurname\"\n                                           value={this.state.nameSurname}\n                                           onChange={this.handleInputChange}\n                                           id=\"nameSurname\"\n                                           placeholder=\"Adınızı ve soyadınızı girin \" />\n                                    <ValidationError message={this.state.validationErrors.nameSurname} />\n                                </FormGroup>\n                                <FormGroup>\n                                    <Input bsSize=\"lg\"\n                                           style={this.state.styles.email}\n                                           type=\"email\"\n                                           name=\"email\"\n                                           value={this.state.email}\n                                           onChange={this.handleInputChange}\n                                           id=\"email\"\n                                           placeholder=\"Email adresinizi girin\" />\n                                </FormGroup>\n                                <FormGroup>\n                                    <Input bsSize=\"lg\"\n                                           type=\"password\"\n                                           name=\"password\"\n                                           value={this.state.password}\n                                           onChange={this.handleInputChange}\n                                           id=\"password\"\n                                           placeholder=\"Parola belirleyin\" />\n                                </FormGroup>\n                                <FormGroup>\n                                    <Input bsSize=\"lg\"\n                                           style={this.state.styles.passwordConfirm}\n                                           type=\"password\"\n                                           name=\"passwordConfirm\"\n                                           value={this.state.passwordConfirm}\n                                           onChange={this.handleInputChange}\n                                           id=\"password-confirm\"\n                                           placeholder=\"Parolanızı teyit edin\" />\n                                </FormGroup>\n\n                                <Button color=\"secondary\"\n                                        size=\"lg\"\n                                        onClick={this.handleRegistration}\n                                        block>\n                                    Kaydı Tamamla\n                                </Button>\n                            </Form>\n                            <hr/>\n                            <p>Zaten üye misiniz?\n                                <Link href={'/login'} >\n                                    <a className=\"text-dark\"> Giriş yapın</a>\n                                </Link>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </Layout>\n        );\n    }\n}\n\nexport default Registration;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAXA;AAYA;AACA;;;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAKA;;;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AAEA;AACA;AADA;AAGA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAMA;AACA;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;;AAlLA;AACA;AAoLA;;;;A","sourceRoot":""}