{"ast":null,"code":"var _jsxFileName = \"/Users/mert/Desktop/I\\u0307TU\\u0308/Fall 2019/Bitirme/Project/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from \"../components/AppLayout\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport ItemCard from \"../components/ItemCard\";\nimport { getToken } from '../utils/auth';\nimport axios from \"axios\";\n\nconst apiConfig = require('../api-config');\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    var token = this.props.token;\n    this.getUser(token);\n    this.state = {\n      loggedIn: token ? true : false,\n      user: {},\n      sales: []\n    };\n  }\n\n  componentDidMount() {\n    this.getActiveSales();\n  }\n\n  getUser(token) {\n    const url = apiConfig.serverUrl + '/user/get';\n    axios.post(url, {}, {\n      headers: {\n        authorization: token\n      }\n    }).then(response => {\n      this.setState({\n        user: response.data.user\n      });\n    }).catch(function (error) {\n      console.log(error);\n    }.bind(this));\n  }\n\n  getActiveSales() {\n    const url = apiConfig.serverUrl + 'sales/active';\n    axios.get(url).then(response => {\n      this.setState({\n        sales: response.data.sales\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    console.log(this.state.sales);\n    const sales = this.state.sales.map(sale => __jsx(ItemCard, {\n      title: sale.title,\n      owner: {\n        nameSurname: sale.owner.nameSurname\n      },\n      city: sale.city,\n      district: sale.district,\n      image: sale.images[0],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }));\n    return __jsx(Layout, {\n      page: \"home\",\n      user: this.state.user,\n      loggedIn: this.state.loggedIn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"container bg-white\",\n      style: {\n        padding: '3%',\n        marginTop: '3%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, __jsx(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \" Online A\\xE7\\u0131k Artt\\u0131rma Uygulamas\\u0131\"), __jsx(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), __jsx(\"p\", {\n      style: {\n        fontFamily: 'verdana',\n        fontSize: '17px',\n        marginBottom: '50px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"\\xDCr\\xFCnlerinizi platformumuzda a\\xE7\\u0131k artt\\u0131rmaya sunabilir, veya aktif a\\xE7\\u0131k artt\\u0131rmalara kat\\u0131larak de\\u011Ferli \\xFCr\\xFCnleri alma f\\u0131rsat\\u0131 yakalayabilirsiniz. A\\u015Fa\\u011F\\u0131daki \\xFCr\\xFCnlerden ilginizi \\xE7ekeni se\\xE7erek sat\\u0131\\u015Fa giderseniz teklifte bulunabilirsiniz.\"), __jsx(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), __jsx(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, sales)));\n  }\n\n}\n\nIndex.getInitialProps = async ctx => {\n  // Check user's session\n  const token = getToken(ctx);\n  return {\n    token\n  };\n};\n\nexport default Index;","map":{"version":3,"sources":["/Users/mert/Desktop/İTÜ/Fall 2019/Bitirme/Project/pages/index.js"],"names":["Layout","ItemCard","getToken","axios","apiConfig","require","Index","React","Component","constructor","props","token","getUser","state","loggedIn","user","sales","componentDidMount","getActiveSales","url","serverUrl","post","headers","authorization","then","response","setState","data","catch","error","console","log","bind","get","render","map","sale","title","nameSurname","owner","city","district","images","padding","marginTop","fontFamily","fontSize","marginBottom","getInitialProps","ctx"],"mappings":"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","sourcesContent":["import Layout from \"../components/AppLayout\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport ItemCard from \"../components/ItemCard\";\nimport { getToken } from '../utils/auth'\nimport axios from \"axios\";\nconst apiConfig = require('../api-config');\n\nclass Index extends React.Component{\n    constructor(props) {\n        super(props);\n        var token = this.props.token;\n        this.getUser(token);\n        this.state = {\n            loggedIn: token ? true : false,\n            user: {},\n            sales: []\n        }\n    }\n    componentDidMount() {\n        this.getActiveSales();\n    }\n\n    getUser(token){\n        const url = apiConfig.serverUrl + '/user/get';\n        axios.post(url, {}, {\n            headers:{\n                authorization: token\n            }})\n            .then((response) => {\n                this.setState({\n                    user: response.data.user\n                });\n            })\n            .catch(function (error) {\n                console.log(error);\n            }.bind(this));\n    }\n    getActiveSales(){\n        const url = apiConfig.serverUrl + 'sales/active';\n        axios.get(url)\n            .then((response) => {\n                this.setState({\n                    sales: response.data.sales\n                });\n            }).catch((error) => {\n                console.log(error);\n            });\n    }\n\n    render() {\n        console.log(this.state.sales);\n        const sales = this.state.sales.map((sale) =>\n            <ItemCard title={sale.title}\n                      owner={{nameSurname: sale.owner.nameSurname}}\n                      city={sale.city}\n                      district={sale.district}\n                      image={sale.images[0]} />\n                      );\n        return (\n            <Layout page=\"home\" user={this.state.user} loggedIn={this.state.loggedIn}>\n                <div className=\"container bg-white\" style={{ padding:'3%', marginTop:'3%'}}>\n                    <h2> Online Açık Arttırma Uygulaması</h2>\n                    <hr/>\n                    <p style={{fontFamily:'verdana', fontSize:'17px', marginBottom:'50px'}}>\n                        Ürünlerinizi platformumuzda açık arttırmaya sunabilir, veya aktif açık arttırmalara\n                        katılarak değerli ürünleri alma fırsatı yakalayabilirsiniz. Aşağıdaki ürünlerden ilginizi çekeni seçerek\n                        satışa giderseniz teklifte bulunabilirsiniz.\n                    </p>\n                    <hr></hr>\n                    <div className=\"row\">\n                        {sales}\n                    </div>\n                </div>\n            </Layout>\n        );\n    }\n}\n\nIndex.getInitialProps = async ctx => {\n    // Check user's session\n    const token = getToken(ctx);\n\n    return { token }\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}