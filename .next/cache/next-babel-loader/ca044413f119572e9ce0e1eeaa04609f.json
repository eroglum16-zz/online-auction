{"ast":null,"code":"import _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar _jsxFileName = \"/Users/mert/Desktop/I\\u0307TU\\u0308/Fall 2019/Bitirme/Project/pages/a/[id].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../../components/AppLayout';\nimport Bidding from \"../../components/Bidding\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText, Badge, Alert, Fade } from 'reactstrap';\nimport { Carousel, CarouselItem, CarouselControl, CarouselIndicators, CarouselCaption } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLiraSign, faUser, faMoneyBill, faUsers, faThumbsUp, faCalendarAlt, faMapMarkerAlt } from '@fortawesome/free-solid-svg-icons';\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport { getToken } from '../../utils/auth';\nimport Router from 'next/router';\nimport Countdown from 'react-countdown-now';\n\nconst apiConfig = require('../../api-config');\n\nconst defaults = require('../../utils/defaults');\n\nimport socketIOClient from 'socket.io-client';\nconst socket = socketIOClient(apiConfig.serverUrl);\n\nclass AuctionDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    var token = this.props.token;\n    this.getUser(token);\n    this.state = {\n      loggedIn: token ? true : false,\n      user: {},\n      bid: \"\",\n      activeIndex: 0,\n      animating: false,\n      sale: defaults.defaultSale,\n      maxBid: {\n        amount: null,\n        bidder: \"\"\n      },\n      biddingFade: {\n        message: \"\",\n        in: false\n      }\n    };\n    this.handleNewBid = this.handleNewBid.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.getSale = this.getSale.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  componentDidMount() {\n    const saleId = this.props.id;\n    this.getSale(saleId);\n    this.setState({\n      bid: \"\"\n    });\n    socket.on('bid update', msg => {\n      if (msg.saleId === saleId) {\n        this.getSale(saleId);\n      }\n    });\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleKeyDown(event) {\n    console.log(event.key);\n\n    if (event.key === 'Enter') {\n      this.handleNewBid();\n      this.getSale(this.state.sale._id);\n    }\n  }\n\n  handleNewBid() {\n    console.log(this.state.bid);\n\n    if (this.state.bid === \"\") {\n      this.showFade(\"Önce teklifinizi girin.\");\n      return;\n    }\n\n    if (this.state.bid < this.state.sale.firstPrice) {\n      this.showFade(\"Başlangıç fiyatından düşük teklif veremezsiniz. (\" + this.state.sale.firstPrice + \"₺)\");\n      this.setState({\n        bid: \"\"\n      });\n      return;\n    }\n\n    if (this.state.bid < this.state.maxBid.amount) {\n      this.showFade(\"En yüksek tekliften düşük teklif veremezsiniz. (\" + this.state.maxBid.amount + \"₺)\");\n      return;\n    }\n\n    if (this.state.bid == this.state.maxBid.amount) {\n      this.showFade(this.state.bid + \"₺ en yüksek teklif, aynı teklifi vermezsiniz.\");\n      return;\n    }\n\n    socket.emit('new bid', {\n      saleId: this.state.sale._id,\n      bid: {\n        amount: _parseInt(this.state.bid),\n        bidder: this.state.user.email\n      }\n    });\n  }\n\n  showFade(message) {\n    this.setState({\n      biddingFade: {\n        message: message,\n        in: true\n      }\n    });\n    setInterval(() => {\n      this.setState({\n        biddingFade: {\n          message: \"\",\n          in: false\n        }\n      });\n    }, 60000);\n  }\n\n  getUser(token) {\n    const url = apiConfig.serverUrl + '/user/get';\n    axios.post(url, {}, {\n      headers: {\n        authorization: token\n      }\n    }).then(response => {\n      this.setState({\n        user: response.data.user\n      });\n    }).catch(function (error) {\n      console.log(error);\n    }.bind(this));\n  }\n\n  getSale(id) {\n    const url = apiConfig.serverUrl + '/sale/' + id;\n    axios.get(url).then(response => {\n      var maxBid = response.data.sale.bids.length === 0 ? {\n        bidder: \"\",\n        amount: 0\n      } : response.data.sale.bids.reduce((a, b) => {\n        return a.amount > b.amount ? a : b;\n      });\n      var sale = response.data.sale;\n      sale.isActive = _Date$now() < sale.endDate;\n      this.setState({\n        sale: sale,\n        maxBid: maxBid\n      });\n    }).catch(error => {\n      console.log(error); //if(!error.response) Router.push('/index');\n      //if(error.response.status === 404) Router.push('/index');\n    });\n  }\n\n  render() {\n    var loggedIn = this.state.loggedIn;\n    const userEmail = this.state.user ? this.state.user.email : \"\";\n    const images = this.state.sale.images;\n    const items = [];\n    var i;\n\n    for (i in images) {\n      items.push({\n        src: apiConfig.serverUrl + '/images/products/' + images[i],\n        altText: this.state.sale.title,\n        caption: this.state.sale.title\n      });\n    }\n\n    const next = () => {\n      if (this.state.animating) return;\n      const nextIndex = this.state.activeIndex === items.length - 1 ? 0 : this.state.activeIndex + 1;\n      this.setState({\n        activeIndex: nextIndex\n      });\n    };\n\n    const previous = () => {\n      if (this.state.animating) return;\n      const nextIndex = this.state.activeIndex === 0 ? items.length - 1 : this.state.activeIndex - 1;\n      this.setState({\n        activeIndex: nextIndex\n      });\n    };\n\n    const goToIndex = newIndex => {\n      if (this.state.animating) return;\n      this.setState({\n        activeIndex: newIndex\n      });\n    };\n\n    const slides = items.map(item => {\n      return __jsx(CarouselItem, {\n        className: \"text-center\",\n        onExiting: () => this.setState({\n          animating: true\n        }),\n        onExited: () => this.setState({\n          animating: false\n        }),\n        key: item.src,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, __jsx(\"img\", {\n        style: {\n          maxHeight: '300px'\n        },\n        src: item.src,\n        alt: item.altText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }));\n    });\n    const date = new Date(this.state.sale.endDate);\n    const options = {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    };\n    const endDate = this.state.sale.endDate === 0 ? \"-\" : date.toLocaleDateString('tr-TR', options);\n    return __jsx(Layout, {\n      page: \"home\",\n      user: this.state.user,\n      loggedIn: this.state.loggedIn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"container bg-white\",\n      style: {\n        padding: '3%',\n        marginTop: '3%',\n        boxShadow: '0px 10px 5px 0px #ccc'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, __jsx(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \" \", this.state.sale.title, \" \", userEmail === this.state.sale.owner.email ? __jsx(Badge, {\n      className: \"ml-2\",\n      color: \"dark\",\n      pill: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"Sizin ilan\\u0131n\\u0131z\") : \"\", __jsx(\"span\", {\n      className: \"float-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    })), __jsx(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }), __jsx(\"p\", {\n      style: {\n        fontFamily: 'verdana',\n        fontSize: '17px',\n        marginBottom: '50px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, this.state.sale.description), __jsx(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"col-md-8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, __jsx(Carousel, {\n      activeIndex: this.state.activeIndex,\n      next: next,\n      previous: previous,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, __jsx(CarouselIndicators, {\n      items: items,\n      activeIndex: this.state.activeIndex,\n      onClickHandler: goToIndex,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }), slides, __jsx(CarouselControl, {\n      direction: \"prev\",\n      directionText: \"Previous\",\n      onClickHandler: previous,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }), __jsx(CarouselControl, {\n      direction: \"next\",\n      directionText: \"Next\",\n      onClickHandler: next,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }))), __jsx(\"div\", {\n      className: \"col-md-4 pt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, __jsx(Bidding, {\n      loggedIn: loggedIn,\n      saleOwner: this.state.sale.owner.email === this.state.user.email,\n      finishedSale: !this.state.sale.isActive,\n      maxBidder: this.state.maxBid.bidder === this.state.user.email,\n      bid: this.state.bid,\n      biddingFade: this.state.biddingFade,\n      endDate: this.state.sale.endDate,\n      maxBid: this.state.maxBid,\n      handleInputChange: this.handleInputChange,\n      handleKeyDown: this.handleKeyDown,\n      handleNewBid: this.handleNewBid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }))), __jsx(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"col-md-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      className: \"mb-4 mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, __jsx(FontAwesomeIcon, {\n      icon: faUser,\n      width: \"16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }), \" \", __jsx(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, \"Sat\\u0131c\\u0131: \"), this.state.sale.owner.nameSurname), __jsx(\"p\", {\n      className: \"mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, __jsx(FontAwesomeIcon, {\n      icon: faMoneyBill,\n      width: \"16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }), \" \", __jsx(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, \"Ba\\u015Flang\\u0131\\xE7 Fiyat\\u0131: \"), this.state.sale.firstPrice, \"\\u20BA\")), __jsx(\"div\", {\n      className: \"col-md-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      className: \"mb-4 mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, __jsx(FontAwesomeIcon, {\n      icon: faUsers,\n      width: \"16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }), \" \", __jsx(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, \"Teklif say\\u0131s\\u0131: \"), this.state.sale.bids.length), __jsx(\"p\", {\n      className: \"mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, __jsx(FontAwesomeIcon, {\n      icon: faThumbsUp,\n      width: \"16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }), \" \", __jsx(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, \"Durum: \"), this.state.sale.state)), __jsx(\"div\", {\n      className: \"col-md-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      className: \"mb-4 mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, __jsx(FontAwesomeIcon, {\n      icon: faCalendarAlt,\n      width: \"16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }), \" \", __jsx(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, \"Kapan\\u0131\\u015F: \"), endDate), __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, __jsx(FontAwesomeIcon, {\n      icon: faMapMarkerAlt,\n      width: \"16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }), \" \", __jsx(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, \"Konum: \"), this.state.sale.city, \", \", this.state.sale.district)))));\n  }\n\n}\n\nAuctionDetail.getInitialProps = async function (context) {\n  const {\n    id\n  } = context.query;\n  const token = getToken(context);\n  return {\n    id,\n    token\n  };\n};\n\nexport default AuctionDetail;","map":{"version":3,"sources":["/Users/mert/Desktop/İTÜ/Fall 2019/Bitirme/Project/pages/a/[id].js"],"names":["Layout","Bidding","Button","Form","FormGroup","Input","InputGroup","InputGroupAddon","InputGroupText","Badge","Alert","Fade","Carousel","CarouselItem","CarouselControl","CarouselIndicators","CarouselCaption","FontAwesomeIcon","faLiraSign","faUser","faMoneyBill","faUsers","faThumbsUp","faCalendarAlt","faMapMarkerAlt","Link","axios","getToken","Router","Countdown","apiConfig","require","defaults","socketIOClient","socket","serverUrl","AuctionDetail","React","Component","constructor","props","token","getUser","state","loggedIn","user","bid","activeIndex","animating","sale","defaultSale","maxBid","amount","bidder","biddingFade","message","in","handleNewBid","bind","handleInputChange","getSale","handleKeyDown","componentDidMount","saleId","id","setState","on","msg","event","target","value","name","console","log","key","_id","showFade","firstPrice","emit","email","setInterval","url","post","headers","authorization","then","response","data","catch","error","get","bids","length","reduce","a","b","isActive","endDate","render","userEmail","images","items","i","push","src","altText","title","caption","next","nextIndex","previous","goToIndex","newIndex","slides","map","item","maxHeight","date","Date","options","year","month","day","hour","minute","toLocaleDateString","padding","marginTop","boxShadow","owner","fontFamily","fontSize","marginBottom","description","nameSurname","city","district","getInitialProps","context","query"],"mappings":"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","sourcesContent":["import Layout from '../../components/AppLayout';\nimport Bidding from \"../../components/Bidding\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText, Badge, Alert, Fade } from 'reactstrap';\nimport {Carousel, CarouselItem, CarouselControl, CarouselIndicators, CarouselCaption} from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faLiraSign, faUser, faMoneyBill, faUsers, faThumbsUp, faCalendarAlt, faMapMarkerAlt } from '@fortawesome/free-solid-svg-icons'\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport { getToken } from '../../utils/auth'\nimport Router from 'next/router'\nimport Countdown from 'react-countdown-now';\n\n\nconst apiConfig = require('../../api-config');\nconst defaults = require('../../utils/defaults');\n\nimport socketIOClient from 'socket.io-client';\nconst socket = socketIOClient(apiConfig.serverUrl);\n\nclass AuctionDetail extends React.Component{\n    constructor(props) {\n        super(props);\n        var token = this.props.token;\n        this.getUser(token);\n\n        this.state = {\n            loggedIn: token ? true : false,\n            user: {},\n            bid: \"\",\n            activeIndex: 0,\n            animating: false,\n            sale: defaults.defaultSale,\n            maxBid:{\n                amount: null,\n                bidder: \"\"\n            },\n            biddingFade: {\n                message: \"\",\n                in: false\n            }\n        };\n        this.handleNewBid = this.handleNewBid.bind(this);\n        this.handleInputChange  = this.handleInputChange.bind(this);\n        this.getSale = this.getSale.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n    }\n    componentDidMount(){\n        const saleId = this.props.id;\n        this.getSale(saleId);\n        this.setState({bid: \"\"});\n        socket.on('bid update', (msg) => {\n            if(msg.saleId === saleId){\n                this.getSale(saleId);\n            }\n        });\n    }\n    handleInputChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n\n        this.setState({\n            [name]: value,\n        });\n    }\n    handleKeyDown(event) {\n        console.log(event.key);\n        if (event.key === 'Enter') {\n            this.handleNewBid();\n            this.getSale(this.state.sale._id);\n        }\n    }\n    handleNewBid(){\n        console.log(this.state.bid );\n        if (this.state.bid === \"\"){\n            this.showFade(\"Önce teklifinizi girin.\");\n            return;\n        }\n        if (this.state.bid < this.state.sale.firstPrice){\n            this.showFade(\"Başlangıç fiyatından düşük teklif veremezsiniz. (\" + this.state.sale.firstPrice + \"₺)\");\n            this.setState({\n                bid: \"\"\n            });\n            return;\n        }\n        if (this.state.bid < this.state.maxBid.amount){\n            this.showFade(\"En yüksek tekliften düşük teklif veremezsiniz. (\" + this.state.maxBid.amount + \"₺)\");\n            return;\n        }\n        if (this.state.bid == this.state.maxBid.amount){\n            this.showFade(this.state.bid + \"₺ en yüksek teklif, aynı teklifi vermezsiniz.\");\n            return;\n        }\n\n        socket.emit('new bid', {\n            saleId: this.state.sale._id,\n            bid: {\n                amount: parseInt(this.state.bid),\n                bidder: this.state.user.email\n            }\n        });\n    }\n    showFade(message){\n\n        this.setState({biddingFade: {\n                message: message,\n                in: true\n            }});\n\n        setInterval(() => {\n            this.setState({\n                biddingFade: {\n                    message:\"\",\n                    in:false\n                }\n            });\n        },60000);\n\n    }\n    getUser(token){\n        const url = apiConfig.serverUrl + '/user/get';\n        axios.post(url, {}, {\n            headers:{\n                authorization: token\n            }})\n            .then((response) => {\n                this.setState({\n                    user: response.data.user\n                });\n            })\n            .catch(function (error) {\n                console.log(error);\n            }.bind(this));\n    }\n    getSale(id){\n        const url = apiConfig.serverUrl + '/sale/' + id;\n        axios.get(url)\n            .then((response) => {\n                var maxBid = response.data.sale.bids.length === 0 ? {\n                    bidder: \"\",\n                    amount: 0\n                }\n                :\n                    response.data.sale.bids.reduce((a, b) => {\n                    return a.amount > b.amount ? a : b;\n                });\n                var sale = response.data.sale;\n                sale.isActive = (Date.now() < sale.endDate);\n                this.setState({\n                    sale: sale,\n                    maxBid: maxBid\n                });\n            })\n            .catch((error) => {\n                console.log(error);\n                //if(!error.response) Router.push('/index');\n                //if(error.response.status === 404) Router.push('/index');\n            })\n    }\n    render() {\n        var loggedIn = this.state.loggedIn;\n        const userEmail = this.state.user ? this.state.user.email : \"\";\n\n        const images = this.state.sale.images;\n        const items = [];\n\n        var i;\n        for(i in images){\n            items.push({\n                src: apiConfig.serverUrl + '/images/products/' + images[i],\n                altText: this.state.sale.title,\n                caption: this.state.sale.title\n            });\n        }\n\n        const next = () => {\n            if (this.state.animating) return;\n            const nextIndex = this.state.activeIndex === items.length - 1 ? 0 : this.state.activeIndex + 1;\n            this.setState({\n                activeIndex: nextIndex\n            });\n        };\n\n        const previous = () => {\n            if (this.state.animating) return;\n            const nextIndex = this.state.activeIndex === 0 ? items.length - 1 : this.state.activeIndex - 1;\n            this.setState({\n                activeIndex: nextIndex\n            });\n        };\n\n        const goToIndex = (newIndex) => {\n            if (this.state.animating) return;\n            this.setState({\n                activeIndex: newIndex\n            });\n        };\n\n        const slides = items.map((item) => {\n            return (\n                <CarouselItem className=\"text-center\"\n                    onExiting={() => this.setState({animating:true})}\n                    onExited={() => this.setState({animating:false})}\n                    key={item.src}\n                >\n                    <img style={{maxHeight: '300px'}} src={item.src} alt={item.altText} />\n                </CarouselItem>\n            );\n        });\n\n        const date = new Date(this.state.sale.endDate);\n        const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };\n        const endDate = this.state.sale.endDate === 0 ? \"-\" : date.toLocaleDateString('tr-TR', options);\n\n        return (\n            <Layout page=\"home\" user={this.state.user} loggedIn={this.state.loggedIn}>\n                <div className=\"container bg-white\" style={{ padding:'3%', marginTop:'3%', boxShadow: '0px 10px 5px 0px #ccc'}} >\n                    <h2> {this.state.sale.title} {userEmail === this.state.sale.owner.email ?\n                        <Badge className=\"ml-2\" color=\"dark\" pill>Sizin ilanınız</Badge> : \"\"\n                    }\n                        <span className=\"float-right\">\n\n                        </span>\n                    </h2>\n                    <hr/>\n                    <p style={{fontFamily:'verdana', fontSize:'17px', marginBottom:'50px'}}>\n                        {this.state.sale.description}\n                    </p>\n                    <div className=\"row\">\n                        <div className=\"col-md-8\">\n                            <Carousel\n                                activeIndex={this.state.activeIndex}\n                                next={next}\n                                previous={previous}\n                            >\n                                <CarouselIndicators items={items}\n                                                    activeIndex={this.state.activeIndex}\n                                                    onClickHandler={goToIndex} />\n                                {slides}\n                                <CarouselControl direction=\"prev\" directionText=\"Previous\" onClickHandler={previous} />\n                                <CarouselControl direction=\"next\" directionText=\"Next\" onClickHandler={next} />\n                            </Carousel>\n                        </div>\n                        <div className=\"col-md-4 pt-4\">\n                            <Bidding loggedIn={loggedIn}\n                                     saleOwner={this.state.sale.owner.email === this.state.user.email}\n                                     finishedSale={!this.state.sale.isActive}\n                                     maxBidder={this.state.maxBid.bidder === this.state.user.email}\n                                     bid={this.state.bid}\n                                     biddingFade={this.state.biddingFade}\n                                     endDate={this.state.sale.endDate}\n                                     maxBid={this.state.maxBid}\n                                     handleInputChange={this.handleInputChange}\n                                     handleKeyDown={this.handleKeyDown}\n                                     handleNewBid={this.handleNewBid}\n                                     />\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-md-4\">\n                            <p className=\"mb-4 mt-4\">\n                                <FontAwesomeIcon icon={faUser} width=\"16\" /> <b>Satıcı: </b>\n                                {this.state.sale.owner.nameSurname}\n                            </p>\n                            <p className=\"mb-4\">\n                                <FontAwesomeIcon icon={faMoneyBill} width=\"16\" /> <b>Başlangıç Fiyatı: </b>\n                                {this.state.sale.firstPrice}₺\n                            </p>\n                        </div>\n                        <div className=\"col-md-4\">\n                            <p className=\"mb-4 mt-4\">\n                                <FontAwesomeIcon icon={faUsers} width=\"16\" /> <b>Teklif sayısı: </b>\n                                {this.state.sale.bids.length}\n                            </p>\n                            <p className=\"mb-4\">\n                                <FontAwesomeIcon icon={faThumbsUp} width=\"16\" /> <b>Durum: </b>\n                                {this.state.sale.state}\n                            </p>\n                        </div>\n                        <div className=\"col-md-4\">\n                            <p className=\"mb-4 mt-4\">\n                                <FontAwesomeIcon icon={faCalendarAlt} width=\"16\" /> <b>Kapanış: </b>\n                                {endDate}\n                            </p>\n                            <p>\n                                <FontAwesomeIcon icon={faMapMarkerAlt} width=\"16\" /> <b>Konum: </b>\n                                {this.state.sale.city}, {this.state.sale.district}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </Layout>\n        );\n    }\n}\n\nAuctionDetail.getInitialProps = async function(context) {\n\n    const {id} = context.query;\n\n    const token = getToken(context);\n\n    return {id, token};\n\n};\n\nexport default AuctionDetail;"]},"metadata":{},"sourceType":"module"}