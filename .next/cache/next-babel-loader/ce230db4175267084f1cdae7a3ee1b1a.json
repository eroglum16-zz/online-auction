{"ast":null,"code":"var _jsxFileName = \"/Users/mert/Desktop/I\\u0307TU\\u0308/Fall 2019/Bitirme/Project/pages/index.js\";\nvar __jsx = React.createElement;\nimport Layout from \"../components/AppLayout\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport ItemCard from \"../components/ItemCard\";\nimport { getToken, guest } from '../utils/auth';\nimport { Alert } from 'reactstrap';\nimport axios from \"axios\";\nimport socketIOClient from 'socket.io-client';\nimport React from \"react\";\n\nconst apiConfig = require('../api-config');\n\nconst socket = socketIOClient(apiConfig.serverUrl);\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    var token = this.props.token;\n    this.getUser(token);\n    this.getActiveSales();\n    this.state = {\n      loggedIn: !!token,\n      user: {\n        nameSurname: \"\"\n      },\n      sales: [],\n      serverDown: false\n    };\n  }\n\n  componentDidMount() {\n    socket.on('update sales', () => {\n      this.getActiveSales();\n    });\n  }\n\n  getUser(token) {\n    const url = apiConfig.serverUrl + '/user/get';\n    axios.post(url, {}, {\n      headers: {\n        authorization: token\n      }\n    }).then(response => {\n      this.setState({\n        user: response.data.user\n      });\n    }).catch(function (error) {\n      if (!error.response) this.setState({\n        serverDown: true\n      });\n      console.log(error);\n    }.bind(this));\n  }\n\n  getActiveSales() {\n    const url = apiConfig.serverUrl + '/sales';\n    axios.get(url).then(response => {\n      this.setState({\n        sales: response.data.sales\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    const sales = this.state.sales.map(sale => __jsx(ItemCard, {\n      sale: sale,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }));\n    return __jsx(Layout, {\n      page: \"home\",\n      user: this.state.user,\n      loggedIn: this.state.loggedIn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"container bg-white\",\n      style: {\n        padding: '3%',\n        marginTop: '3%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, __jsx(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \" Online A\\xE7\\u0131k Artt\\u0131rma Uygulamas\\u0131\"), __jsx(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), this.state.serverDown ? __jsx(Alert, {\n      style: {\n        fontFamily: 'verdana',\n        fontSize: '17px'\n      },\n      color: \"info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Sunucular\\u0131m\\u0131zdaki sorundan dolay\\u0131 hizmet veremiyoruz. \\xC7ok yak\\u0131nda geri d\\xF6nece\\u011Fiz. Anlay\\u0131\\u015F\\u0131n\\u0131z i\\xE7in te\\u015Fekk\\xFCr ederiz.\") : __jsx(\"p\", {\n      style: {\n        fontFamily: 'verdana',\n        fontSize: '17px',\n        marginBottom: '50px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"\\xDCr\\xFCnlerinizi platformumuzda a\\xE7\\u0131k artt\\u0131rmaya sunabilir, veya aktif a\\xE7\\u0131k artt\\u0131rmalara kat\\u0131larak de\\u011Ferli \\xFCr\\xFCnleri alma f\\u0131rsat\\u0131 yakalayabilirsiniz. A\\u015Fa\\u011F\\u0131daki \\xFCr\\xFCnlerden ilginizi \\xE7ekeni se\\xE7erek sat\\u0131\\u015Fa giderseniz teklifte bulunabilirsiniz.\"), __jsx(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), __jsx(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, sales)));\n  }\n\n}\n\nIndex.getInitialProps = async ctx => {\n  // Check user's session\n  const token = getToken(ctx);\n  return {\n    token\n  };\n};\n\nexport default Index;","map":{"version":3,"sources":["/Users/mert/Desktop/IÌ‡TUÌˆ/Fall 2019/Bitirme/Project/pages/index.js"],"names":["Layout","ItemCard","getToken","guest","Alert","axios","socketIOClient","React","apiConfig","require","socket","serverUrl","Index","Component","constructor","props","token","getUser","getActiveSales","state","loggedIn","user","nameSurname","sales","serverDown","componentDidMount","on","url","post","headers","authorization","then","response","setState","data","catch","error","console","log","bind","get","render","map","sale","padding","marginTop","fontFamily","fontSize","marginBottom","getInitialProps","ctx"],"mappings":"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","sourcesContent":["import Layout from \"../components/AppLayout\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport ItemCard from \"../components/ItemCard\";\nimport { getToken, guest } from '../utils/auth'\nimport { Alert } from 'reactstrap';\nimport axios from \"axios\";\nimport socketIOClient from 'socket.io-client';\nimport React from \"react\";\n\nconst apiConfig = require('../api-config');\nconst socket = socketIOClient(apiConfig.serverUrl);\n\nclass Index extends React.Component{\n    constructor(props) {\n        super(props);\n        var token = this.props.token;\n        this.getUser(token);\n        this.getActiveSales();\n        this.state = {\n            loggedIn: !!token,\n            user: {\n                nameSurname: \"\"\n            },\n            sales: [],\n            serverDown: false\n        }\n    }\n    componentDidMount() {\n        socket.on('update sales', () => {\n            this.getActiveSales();\n        });\n    }\n    getUser(token){\n        const url = apiConfig.serverUrl + '/user/get';\n        axios.post(url, {}, {\n            headers:{\n                authorization: token\n            }})\n            .then((response) => {\n                this.setState({\n                    user: response.data.user\n                });\n            })\n            .catch(function (error) {\n                if(!error.response) this.setState({\n                    serverDown: true\n                });\n                console.log(error);\n            }.bind(this));\n    }\n    getActiveSales(){\n        const url = apiConfig.serverUrl + '/sales';\n        axios.get(url)\n            .then((response) => {\n                this.setState({\n                    sales: response.data.sales\n                });\n            }).catch((error) => {\n                console.log(error);\n            });\n    }\n    render() {\n        const sales = this.state.sales.map((sale) =>\n            <ItemCard sale={sale} />\n                      );\n        return (\n            <Layout page=\"home\" user={this.state.user} loggedIn={this.state.loggedIn}>\n                <div className=\"container bg-white\" style={{ padding:'3%', marginTop:'3%'}}>\n                    <h2> Online AÃ§Ä±k ArttÄ±rma UygulamasÄ±</h2>\n                    <hr/>\n                    {\n                        this.state.serverDown ?\n                            <Alert style={{fontFamily:'verdana', fontSize:'17px'}} color=\"info\">\n                                SunucularÄ±mÄ±zdaki sorundan dolayÄ± hizmet veremiyoruz. Ã‡ok yakÄ±nda geri dÃ¶neceÄŸiz.\n                                AnlayÄ±ÅŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz.\n                            </Alert>\n                            :\n                            <p style={{fontFamily:'verdana', fontSize:'17px', marginBottom:'50px'}}>\n                                ÃœrÃ¼nlerinizi platformumuzda aÃ§Ä±k arttÄ±rmaya sunabilir, veya aktif aÃ§Ä±k arttÄ±rmalara\n                                katÄ±larak deÄŸerli Ã¼rÃ¼nleri alma fÄ±rsatÄ± yakalayabilirsiniz. AÅŸaÄŸÄ±daki Ã¼rÃ¼nlerden ilginizi Ã§ekeni seÃ§erek\n                                satÄ±ÅŸa giderseniz teklifte bulunabilirsiniz.\n                            </p>\n                    }\n\n                    <hr></hr>\n                    <div className=\"row\">\n                        {sales}\n                    </div>\n                </div>\n            </Layout>\n        );\n    }\n}\n\nIndex.getInitialProps = async ctx => {\n    // Check user's session\n    const token = getToken(ctx);\n\n    return { token }\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}