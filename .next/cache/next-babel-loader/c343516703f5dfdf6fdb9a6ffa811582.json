{"ast":null,"code":"var _jsxFileName = \"/Users/mert/Desktop/I\\u0307TU\\u0308/Fall 2019/Bitirme/Project/pages/login.js\";\nvar __jsx = React.createElement;\nimport Layout from \"../components/AppLayout\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport { Button, Form, FormGroup, Input, Alert } from 'reactstrap';\nimport Link from \"next/link\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { guest, login } from '../utils/auth';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    const message = this.props.registered ? 'Kaydınız oluşturuldu, lütfen giriş yapın!' : '';\n    const color = this.props.registered ? 'success' : '';\n    this.state = {\n      alert: {\n        message: message,\n        color: color\n      },\n      email: '',\n      password: ''\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleLogin = this.handleLogin.bind(this);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleLogin() {\n    const apiConfig = require('../api-config');\n\n    const url = apiConfig.serverUrl + '/user/authenticate';\n    axios.post(url, {\n      email: this.state.email,\n      password: this.state.password\n    }).then(function (response) {\n      const token = response.data.token;\n      login({\n        token\n      });\n    }).catch(function (error) {\n      if (error.response) {\n        let message = error.response.data.message;\n        let email = error.response.status === 404 ? '' : this.state.email;\n        this.setState({\n          alert: {\n            message: message,\n            color: 'danger'\n          },\n          email: email,\n          password: ''\n        });\n      } else {\n        this.setState({\n          alert: {\n            message: 'Sunucudaki bir sorundan dolayı kayıt işleminizi şu anda gerçekleştiremiyoruz.',\n            color: 'info'\n          }\n        });\n      }\n    }.bind(this));\n  }\n\n  render() {\n    return __jsx(Layout, {\n      page: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"container bg-white\",\n      style: {\n        padding: '3%',\n        marginTop: '3%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"row justify-content-md-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"col-md-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, this.state.alert.message.length > 0 ? __jsx(Alert, {\n      color: this.state.alert.color,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.state.alert.message) : '', __jsx(\"h2\", {\n      className: \"text-light bg-dark text-center rounded p-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \" Kullan\\u0131c\\u0131 Giri\\u015Fi \"), __jsx(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), __jsx(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, __jsx(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, __jsx(Input, {\n      bsSize: \"lg\",\n      type: \"email\",\n      name: \"email\",\n      value: this.state.email,\n      onChange: this.handleInputChange,\n      id: \"email\",\n      placeholder: \"Kay\\u0131tl\\u0131 email adresiniz\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    })), __jsx(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, __jsx(Input, {\n      bsSize: \"lg\",\n      type: \"password\",\n      name: \"password\",\n      value: this.state.password,\n      onChange: this.handleInputChange,\n      id: \"password\",\n      placeholder: \"Parolan\\u0131z\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    })), __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, __jsx(Link, {\n      href: '/forget-password',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      className: \"text-dark \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \" Parolam\\u0131 unuttum\"))), __jsx(Button, {\n      color: \"secondary\",\n      size: \"lg\",\n      onClick: this.handleLogin,\n      block: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Giri\\u015F Yap\\u0131n\")), __jsx(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Hesab\\u0131n\\u0131z yok mu?\", __jsx(Link, {\n      href: '/registration',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      className: \"text-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \" \\xDCye olun\")))))));\n  }\n\n}\n\nLogin.getInitialProps = async function (context) {\n  guest(context);\n  const {\n    registered\n  } = context.query;\n  return {\n    registered\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/mert/Desktop/İTÜ/Fall 2019/Bitirme/Project/pages/login.js"],"names":["Layout","Button","Form","FormGroup","Input","Alert","Link","React","axios","guest","login","Login","Component","constructor","props","message","registered","color","state","alert","email","password","handleInputChange","bind","handleLogin","event","target","value","name","setState","apiConfig","require","url","serverUrl","post","then","response","token","data","catch","error","status","render","padding","marginTop","length","getInitialProps","context","query"],"mappings":"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","sourcesContent":["import Layout from \"../components/AppLayout\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\nimport {Button, Form, FormGroup, Input, Alert} from 'reactstrap';\nimport Link from \"next/link\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport {guest, login} from '../utils/auth'\n\nclass Login extends React.Component{\n    constructor(props) {\n        super(props);\n        const message = this.props.registered ? 'Kaydınız oluşturuldu, lütfen giriş yapın!' : '';\n        const color = this.props.registered ? 'success' : '';\n        this.state = {\n            alert: {\n                message: message,\n                color: color\n            },\n            email: '',\n            password: ''\n        }\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handleLogin = this.handleLogin.bind(this);\n    }\n\n    handleInputChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n\n        this.setState({\n            [name]: value\n        });\n    }\n\n    handleLogin(){\n        const apiConfig = require('../api-config');\n        const url = apiConfig.serverUrl + '/user/authenticate';\n        axios.post(url, {\n            email: this.state.email,\n            password: this.state.password\n        })\n            .then(function (response) {\n                const token  = response.data.token;\n                login({ token });\n            })\n            .catch(function (error) {\n                if (error.response){\n                    let message = error.response.data.message;\n                    let email = error.response.status === 404 ? '' : this.state.email;\n                    this.setState({\n                        alert: {\n                            message: message,\n                            color: 'danger'\n                        },\n                        email: email,\n                        password: ''\n                    });\n                }else{\n                    this.setState({\n                        alert: {\n                            message: 'Sunucudaki bir sorundan dolayı kayıt işleminizi şu anda gerçekleştiremiyoruz.',\n                            color: 'info'\n                        }\n                    });\n                }\n            }.bind(this));\n    }\n\n    render() {\n        return (\n            <Layout page=\"login\">\n                <div className=\"container bg-white\" style={{ padding:'3%', marginTop:'3%'}}>\n                    <div className=\"row justify-content-md-center\">\n                        <div className=\"col-md-4\">\n                            { this.state.alert.message.length > 0 ?\n                                <Alert color={this.state.alert.color}>\n                                    {this.state.alert.message}\n                                </Alert>\n                                : ''\n                            }\n                            <h2 className=\"text-light bg-dark text-center rounded p-2\"> Kullanıcı Girişi </h2>\n                            <hr/>\n                            <Form>\n                                <FormGroup>\n                                    <Input bsSize=\"lg\"\n                                           type=\"email\"\n                                           name=\"email\"\n                                           value={this.state.email}\n                                           onChange={this.handleInputChange}\n                                           id=\"email\"\n                                           placeholder=\"Kayıtlı email adresiniz\" />\n                                </FormGroup>\n                                <FormGroup>\n                                    <Input bsSize=\"lg\"\n                                           type=\"password\"\n                                           name=\"password\"\n                                           value={this.state.password}\n                                           onChange={this.handleInputChange}\n                                           id=\"password\"\n                                           placeholder=\"Parolanız\" />\n                                </FormGroup>\n                                <p>\n                                    <Link href={'/forget-password'} >\n                                        <a className=\"text-dark \"> Parolamı unuttum</a>\n                                    </Link>\n                                </p>\n                                <Button color=\"secondary\"\n                                        size=\"lg\"\n                                        onClick={this.handleLogin}\n                                        block>\n                                    Giriş Yapın\n                                </Button>\n                            </Form>\n                            <hr/>\n                            <p>Hesabınız yok mu?\n                                <Link href={'/registration'} >\n                                    <a className=\"text-dark\"> Üye olun</a>\n                                </Link>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </Layout>\n        );\n    }\n}\n\nLogin.getInitialProps = async function(context) {\n    guest(context);\n    const {registered} = context.query;\n    return {registered};\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}